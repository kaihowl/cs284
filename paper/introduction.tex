\section{Introduction}\label{sec:Intro}

Wireless Sensor Networks (WSNs) use sensors to measure a wide variety of live data and actuators to manipulate their environments. Data are communicated between nodes and sinks. WSNs are self-configuring, inherently small, low-cost, and low-power. This makes it a suitable technology for use in monitoring and tracking applications. Many of the envisioned applications of sensor networks require a large-scale deployment that comprises thousands of sensor nodes, e.g., the Internet of things \cite{22} and sensor database systems \cite{2}. With a large number of sensor nodes, it becomes challenging to maintain all collected data in a centralized unit (or multiple centralized units). Moreover, the demand for data might vary from node to node. Keeping the node awake at all times is a waste of communication resources and will ultimately drain the nodes power prematurely. A energy-aware demand-driven transactional protocol is needed to mitigate this waste of resources. Many papers propose a distributed approach to data-management in sensor networks \cite{2,4.11,23}. Instead of having a central database collecting sensor readings from individual nodes, the data is stored and distributed over the nodes themselves. Queries then extract the necessary data from the sensor nodes. 

In a transactional distributed scheme the node needs to be alerted for any data queries. Thus, making the node awake (i.e., consuming energy) even if it is not sending or collecting data. A desirable property of WSNs is power-efficiency. The main objective of this work is to save power and prolong the life of nodes by making them consume as less power as possible. Having low sleep times will make a node handle incoming requests faster, since they are only waiting for a short period. However, a longer sleeping period will minimize the number of switches between sleeping and active modes. These switches incur a communication overhead; a newly awaken node must poll its parent node for requests. Furthermore, the waking time (the time required for a node to switch from sleeping to active) ranges between 2 to 13.2 milliseconds for XBEE series 2 nodes \cite{19}. Thus, we aim to maximize sleeping time while we maintain QoS requirements.

The paper is divided as follows. Section 2 details the motivation of our research, Section 3 outlines related work, Section 4 summarizes the technical background of the prototype, Section 5 describes the system design of the prototype, Section 6 proposes a model for QoS in our system, Section 7 evaluates the model both with the prototype and with simulations, Section 8 concludes.