\section{Related Work} \label{sec:relwork}

A transactional framework for WSNs was proposed \cite{2, 24}. Our framework is based on them. Specifically we will use the notion of one-time and persistent queries. Queries specify rules that include among others: (1) the duration of needed observations. (2) frequency. (3) upper/lower thresholds. (4) desired locations/sensors. and (5) QoS requirements. In \cite{2}, a hybrid storage system to maintain historical data is proposed; historical data should be sent out by the node to a central site where it is stored for later retrieval. We pursue a more a radical approach and propose to employ a fully distributed scheme. If a central node or entity was interested in maintaining the history of a specific node, it can poll it on demand or issue a persistent query. A persistent query tells a node to send collected data for a specific duration and rate, e.g., send me the temperature every ten minutes for the next seven days.

Energy conservation gained a lot of attention in the WSNs community \cite{1,5,6,7}; proposals to design MAC and routing protocols, in addition to topology control that are energy aware are examples of such work. We, however, consider a more practical approach; we consider network topology is a given. This is important since we cannot assume that we have control on the topology or movement of nodes. Also, we consider off-the-shelf hardware. Thus, we model our solution around the IEEE 802.15.4 standard and AODV protocol \cite{aodv}. Some other work also tried to model IEEE 802.15.4 networks \cite{8,9,10,4.11,12,13}. Some work even model the network for energy efficiency \cite{10,12,13}. Our work focuses on on-demand query-based transactional WSNs. This type of WSNs has also been treated for energy efficiency consideration \cite{14,25}. In~\cite{25}, the authors try to minimize energy consumption by sleeping. They develop a probabilistic model that trade-off between energy and data quality. Our model extends the work done in the literature of modeling transactional WSNs by the following. We consider the trade-off between QoS and energy efficiency. Also, we employ an M/G/1 model with vacations to capture the system and derive appropriate sleeping times given QoS requirements. Similar employment of this mathematical treatment is done in \cite{15} for optical networks. We use their approach and modify it to model IEEE 802.15.4 sleeping times.
